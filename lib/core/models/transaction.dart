import 'package:splitcount/core/models/group.dart';

class Transaction {
  // This id will probably be generated by a backend in future
  late final String id;

  final String? emoji;
  final String user;
  final List<String> users;
  final String title;
  final double amount;
  final String currency;
  final DateTime dateTime;
  final Group group;

  Transaction(this.id, this.user, this.users, this.title, this.amount,
      this.dateTime, this.group,
      {this.emoji, this.currency = "â‚¬"});

  factory Transaction.fromAppwriteDocument(Map<String, dynamic> data) {
    var group = Group.fromAppwriteDocument(data["group"]);
    List<dynamic> usersData = data["users"];
    List<String> users = usersData.cast<String>();

    return Transaction(
        data["\$id"],
        data["user"],
        users,
        data["title"],
        (data["amount"] as num).toDouble(),
        DateTime.parse(data["date"] as String),
        group);
  }
}
